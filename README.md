# Gradio Desktop - 物体検出アプリ

RF-DETRモデルを使用した物体検出アプリケーションです。GradioでWebインターフェースを提供し、PyInstallerでデスクトップアプリとしても実行できます。


## 参考ブログ

**[uv + Gradio + PyInstallerで、AIデスクトップアプリを作ろう](https://tech-useit-wealth.com/uv-gradio-pyinstaller)**

このプロジェクトは、上記ブログで紹介されている「uv + Gradio + PyInstaller」の組み合わせを使用してAIデスクトップアプリを作成する手法を実践したものです。

### ブログで紹介されている内容

- **uv**: Pythonの環境構築の決定版ツール（Pythonバージョンと依存関係を一本で管理）
- **Gradio**: Streamlitより軽量で高速なAIアプリ向けUIフレームワーク
- **PyInstaller**: Pythonアプリをデスクトップアプリ化する定番ツール

### なぜこの組み合わせがおすすめなのか

1. **開発効率**: uvによる高速な環境構築とパッケージ管理
2. **UIの軽量性**: Gradioによるシンプルで高速なAIアプリUI
3. **配布の簡単さ**: PyInstallerによるワンクリック実行可能なデスクトップアプリ化
4. **学習コスト**: 既存のPython知識でAIデスクトップアプリを構築可能


## 概要

このアプリケーションは以下の機能を提供します：

- **物体検出**: RF-DETRモデルを使用して画像内の物体を検出
- **可視化**: 検出された物体にバウンディングボックスとラベルを表示
- **信頼度調整**: スライダーで検出の信頼度閾値を調整可能
- **COCO2017クラス対応**: 80種類の物体クラスを認識
- **Webインターフェース**: Gradioによる直感的なUI
- **デスクトップアプリ**: PyInstallerによるスタンドアロン実行ファイル

## 必要な環境

- Python 3.12以上
- uv（パッケージマネージャー）

## セットアップ

### 1. 依存関係のインストール

```bash
# uvを使用して依存関係をインストール
uv sync
```

### 2. 仮想環境の有効化

```bash
# 仮想環境を有効化
uv shell
```

## 起動方法

### Webアプリケーションとして起動

```bash
# 仮想環境内で実行
python hello.py
```

アプリケーションが起動すると、ブラウザで自動的にWebインターフェースが開きます。

### 使用方法

1. **画像のアップロード**: 「画像をアップロードしてください」エリアに画像ファイルをドラッグ&ドロップまたはクリックして選択
2. **信頼度閾値の調整**: スライダーで検出の信頼度閾値を調整（0.1〜1.0）
3. **検出実行**: 画像と閾値を設定後、自動的に物体検出が実行されます
4. **結果確認**: 検出結果が画像上にバウンディングボックスとして表示され、検出サマリーがテキストで表示されます

## デスクトップアプリの作成

PyInstallerを使用してスタンドアロンのデスクトップアプリケーションを作成できます。

### 1. ビルドの実行

```bash
# 仮想環境内で実行
pyinstaller hello.spec
```

### 2. 実行ファイルの場所

ビルドが完了すると、`dist/hello.exe`（Windows）または`dist/hello`（Linux/macOS）が生成されます。

### 3. デスクトップアプリの実行

```bash
# Windows
dist/hello.exe

# Linux/macOS
./dist/hello
```

## プロジェクト構成

```
gradio_desktop/
├── hello.py              # メインアプリケーション
├── hello.spec            # PyInstaller設定ファイル
├── pyproject.toml        # プロジェクト設定と依存関係
├── uv.lock              # 依存関係のロックファイル
├── rf-detr-base.pth     # RF-DETRモデルファイル
├── build/               # PyInstallerビルド中間ファイル
└── dist/                # ビルド済み実行ファイル
```

## 技術仕様

- **フレームワーク**: Gradio 5.49.1+
- **物体検出モデル**: RF-DETR 1.3.0+
- **深層学習フレームワーク**: PyTorch 2.8.0
- **パッケージ管理**: uv
- **デスクトップアプリ化**: PyInstaller 6.16.0+

## ライセンス

このプロジェクトのライセンスについては、各依存パッケージのライセンスを確認してください。

## 貢献

バグ報告や機能追加の提案は、IssueまたはPull Requestでお願いします。
